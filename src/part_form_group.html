<?

atts.id = atts.id || '';
atts.classes = atts.classes || '';
atts.label = atts.label || atts.id;
atts.value = atts.type === 'date' ?
                            moment(atts.value).format('YYYY-MM-DD') :
                            atts.value;
atts.type = atts.type || 'text';
atts.disabled = atts.disabled || false;

if(atts.options) {
    atts.options = createOptionsObject(atts.options);
}

var input_atts = 'id="' + atts.id + '" name="' + atts.id + '" class="form-control ' + atts.classes + '" ' + atts.disabled;

?>

<? if(atts.type !== 'hidden') { ?>
    <div class="form-group">
            <label class="col-sm-4 control-label" for="<?= atts.id; ?>"><?= atts.label; ?></label>
        <div class="col-sm-4">
            <? if (atts.type === 'select') { ?>
                <select <?!= input_atts; ?>>
                    <option value="">Select an option</option>
                    <? for(var key in atts.options) { ?>
                        <? var selected = atts.options[key] === atts.value ? 'selected' : ' '; ?>
                        <option value="<?= atts.options[key]; ?>" <?!= selected; ?>><?= key; ?></option>
                    <? } ?>
                </select>
            <? } else if (atts.type === 'textarea') { ?>
                <textarea <?!= input_atts; ?> rows="3" ><?= atts.value; ?></textarea>
            <? } else { ?>
                <input <?!= input_atts; ?> type="<?= atts.type; ?>" value="<?= atts.value; ?>">
            <? } ?>
        </div>
    </div>
<? } else { ?>
    <input <?!= input_atts; ?> type="<?= atts.type; ?>" value="<?= atts.value; ?>">
<? } ?>