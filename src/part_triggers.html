<?

var triggers = getTriggers();

?>

<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>On</th>
            <th>Sheet</th>
            <th>Sent to</th>
        </tr>
    </thead>

    <tbody>
        <? for(var t in triggers) { ?>
            <tr>
                <td><?= triggers[t][0]; ?></td>
                <td><?= triggers[t][1]; ?></td>
                <td>
                    <?= triggers[t][2]; ?>

                    <span>
                        (<a class="trigger-action text-right"
                            href="#"
                            data-action="deleteTrigger"
                            data-trigger-index="<?= t; ?>"
                            data-template="part_triggers"
                            data-modal="Trigger succesfully deleted.">delete</a>)
                    </span>
                </td>
            </tr>
        <? } ?>
    </tbody>
</table>


<div class="row row-margin">
    <form class="form-horizontal col-sm-12">
        <fieldset>

            <?!= templatePart('part_form_group', {
                'type': 'select',
                'label': 'Trigger runs: ',
                'required': true,
                'options': ['On add', 'On edit']
            }); ?>

            <?!= templatePart('part_form_group', {
                'type': 'select',
                'label': 'Triggers for sheet: ',
                'required': true,
                'options': getSheetList()
            }); ?>

            <?!= templatePart('part_form_group', {
                'type': 'email',
                'label': 'Email should be sent to: ',
                'required': true,
                'value': Session.getActiveUser().getEmail()
            }); ?>

            <div class="form-group">
                <label class="col-sm-4 control-label"></label>
                    <div class="col-sm-4">
                        <button class="trigger-action btn btn-primary"
                                href="#"
                                type="button"
                                data-action="saveTrigger"
                                data-form-values="#dynamic-content"
                                data-template="part_triggers"
                                data-modal="Trigger succesfully added.">
                                <span aria-hidden="true">Add trigger</span>
                        </button>
                </div>
            </div>
        </fieldset>
    </form>
</div>